#!/bin/bash

# Smart Parking System Installation Script
echo "ğŸš— à¸à¸³à¸¥à¸±à¸‡à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸£à¸°à¸šà¸šà¸ˆà¸­à¸‡à¸—à¸µà¹ˆà¸ˆà¸­à¸”à¸£à¸–à¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸°..."

# Check if Node.js is installed
if ! command -v node &> /dev/null; then
    echo "âŒ Node.js à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Node.js à¸à¹ˆà¸­à¸™"
    echo "à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹„à¸”à¹‰à¸—à¸µà¹ˆ: https://nodejs.org/"
    exit 1
fi

# Check if npm is installed
if ! command -v npm &> /dev/null; then
    echo "âŒ npm à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ npm à¸à¹ˆà¸­à¸™"
    exit 1
fi

echo "âœ… Node.js à¹à¸¥à¸° npm à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™"

# Install dependencies
echo "ğŸ“¦ à¸à¸³à¸¥à¸±à¸‡à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies..."
npm install

if [ $? -eq 0 ]; then
    echo "âœ… à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies à¸ªà¸³à¹€à¸£à¹‡à¸ˆ"
else
    echo "âŒ à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§"
    exit 1
fi

# Create startup script
echo "ğŸ“ à¸à¸³à¸¥à¸±à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™..."
cat > start.sh << 'EOF'
#!/bin/bash
echo "ğŸš— à¸à¸³à¸¥à¸±à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸°à¸šà¸šà¸ˆà¸­à¸‡à¸—à¸µà¹ˆà¸ˆà¸­à¸”à¸£à¸–à¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸°..."
echo "ğŸŒ à¹€à¸›à¸´à¸”à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œà¹„à¸›à¸—à¸µà¹ˆ: http://localhost:3000"
echo "ğŸ“± à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­: http://[IP_ADDRESS]:3000"
echo "â¹ï¸  à¸à¸” Ctrl+C à¹€à¸à¸·à¹ˆà¸­à¸«à¸¢à¸¸à¸”à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™"
echo ""
npm start
EOF

chmod +x start.sh

# Create Windows batch file
cat > start.bat << 'EOF'
@echo off
echo ğŸš— à¸à¸³à¸¥à¸±à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸°à¸šà¸šà¸ˆà¸­à¸‡à¸—à¸µà¹ˆà¸ˆà¸­à¸”à¸£à¸–à¸­à¸±à¸ˆà¸‰à¸£à¸´à¸¢à¸°...
echo ğŸŒ à¹€à¸›à¸´à¸”à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œà¹„à¸›à¸—à¸µà¹ˆ: http://localhost:3000
echo ğŸ“± à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸·à¸­à¸–à¸·à¸­: http://[IP_ADDRESS]:3000
echo â¹ï¸  à¸à¸” Ctrl+C à¹€à¸à¸·à¹ˆà¸­à¸«à¸¢à¸¸à¸”à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™
echo.
npm start
EOF

echo "âœ… à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ"

# Get local IP address
LOCAL_IP=$(hostname -I | awk '{print $1}')
echo ""
echo "ğŸ‰ à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™!"
echo ""
echo "ğŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¸„à¸±à¸:"
echo "   â€¢ à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ: http://localhost:3000"
echo "   â€¢ IP Address: http://$LOCAL_IP:3000"
echo "   â€¢ à¹„à¸Ÿà¸¥à¹Œà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™: ./start.sh (Linux/Mac) à¸«à¸£à¸·à¸­ start.bat (Windows)"
echo ""
echo "ğŸ”§ à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Arduino:"
echo "   â€¢ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ IP address à¹ƒà¸™à¹‚à¸„à¹‰à¸” Arduino à¹€à¸›à¹‡à¸™: $LOCAL_IP"
echo "   â€¢ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² WiFi SSID à¹à¸¥à¸° Password"
echo ""
echo "ğŸš€ à¹€à¸£à¸´à¹ˆà¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™:"
echo "   ./start.sh"
echo ""
echo "ğŸ“š à¸”à¸¹à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¸—à¸µà¹ˆ: README.md"


